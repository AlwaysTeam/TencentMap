<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./images/favicon.ico" />
    <title>腾讯地图</title>
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }
      .container {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
      }
      #mapDiv {
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
    </style>
    <script type="text/javascript">
      window._TMapSecurityConfig = {
        serviceHost: "https://static.zhangsifan.com/_TMapService",
      };
    </script>
    <script src="https://map.qq.com/api/gljs?v=1.exp"></script>
  </head>
  <body onLoad="initMap()">
    <div class="container">
      <div>
        <input
          type="button"
          onClick="window.open('./car_track.html','_blank')"
          value="车辆轨迹"
        />
      </div>
      <div id="mapDiv"></div>
    </div>
    <script>
      function initMap() {
        var map = new TMap.Map(document.getElementById("mapDiv"), {
          center: new TMap.LatLng(39.9069659960541, 116.39749745438792),
          zoom: 15,
        });
        var markerLayer = new TMap.MultiMarker({
          map: map,
          styles: {
            myStyle: new TMap.MarkerStyle({
              width: 25,
              height: 35,
              anchor: { x: 16, y: 32 },
            }),
          },
          geometries: [],
        });
        map.on("click", (evt) => {
          markerLayer.setGeometries([]);
          markerLayer.add({
            position: evt.latLng,
          });
          map.setCenter(evt.latLng);
          console.log(
            "点击位置的经纬度为：" +
              evt.latLng.getLat() +
              "," +
              evt.latLng.getLng()
          );
        });
      }
    </script>
  </body>
</html>
